getgenv().a = false;
getgenv().b = false;

local plr = game:GetService('Players').LocalPlayer
local light = game:FindFirstChild('Lighting')
local workspace = game:GetService("Workspace")
local runService = game:GetService("RunService")
local char = plr.Character
local TS = game:GetService('TweenService')
local camera = workspace.CurrentCamera
local map = game:GetService("Workspace").Map











----/// FUNCTION///--------
function Fly()
    spawn(function()
        local fly = Instance.new("Part") 
    if getgenv().b == true then
    while true do task.wait()
        local pos = game:GetService('Players').LocalPlayer.Character.HumanoidRootPart.CFrame -- grabs their CFrame
        ---print(pos.x, pos.y, pos.z) -- prints the x, y and z coordinates.
        
        fly.Name = 'Fly'
        fly.Size = Vector3.new(5,.5,5)
        fly.CanCollide = true
        fly.Anchored = true
        fly.Parent = game:GetService('Workspace')
        fly.Material = 'Air'
        fly.Transparency = .5
        fly.Position = Vector3.new(pos.x, pos.y-3.2, pos.z)
        fly.BrickColor = BrickColor.new('Deep Blue')
        end
        end
    end)
end

function KillAura()
    spawn(function()
        while getgenv().a do task.wait()
            for i,v in pairs(workspace.Enemies:GetChildren()) do
                if v:IsA("Model") and v:FindFirstChildOfClass("Humanoid") and v:FindFirstChildOfClass("Humanoid").Health > 0 and game.Players.LocalPlayer:DistanceFromCharacter(v.PrimaryPart.Position) < 21 then
                    local args = {
                        [1] = 0,
                        [2] = game:GetService("Players").LocalPlayer.Character,
                        [3] = v,
                        [4] = game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Tool"),
                        [5] = "Slash"
                    }
        
                    game:GetService("ReplicatedStorage").RS.Remotes.Combat.DealWeaponDamage:FireServer(unpack(args))
                end
            end
        end
    end)
end

local function esp(ArmorC)
    for __,v in pairs(map:GetDescendants()) do -- the path
        if v.Name == "Armor Chest" then -- the item
            local a = Instance.new("BillboardGui",v) -- pretty much explains everything
            a.Name = "AChest"
            a.Size = UDim2.new(10,0, 10,0)
            a.AlwaysOnTop = true
            local b = Instance.new("Frame",a)
            b.Size = UDim2.new(1,0, 1,0)
            b.BackgroundTransparency = 0.80
            b.BorderSizePixel = 0
            b.BackgroundColor3 = Color3.new(0, 255, 0)
            local c = Instance.new('TextLabel',b)
            c.Size = UDim2.new(2,0,2,0)
            c.BorderSizePixel = 0
            c.TextSize = 20
            c.Text = v.Name
            c.BackgroundTransparency = 1
        end
    end
 end

 
------/// ESP STUFF //------

for i,Armor in pairs(map:GetDescendants()) do
    if Armor:IsA('Armor Chest') then
        esp(ArmorC)
    end
end
map.ChildAdded:Connect(function(Armor)
    if Armor:IsA('Armor Chest') then
        esp(ArmorC)
    end
end)

-------/// UI STUFF///-------
local library = loadstring(game:GetObjects("rbxassetid://7657867786")[1].Source)()
local Wait = library.subs.Wait -- Only returns if the GUI has not been terminated. For 'while Wait() do' loops

local PepsisWorld = library:CreateWindow({
Name = "Hitler",
Themeable = {
Info = "DeezNut"
}
})
---///First Tab///------

local GeneralTab = PepsisWorld:CreateTab({
    Name = "Main";
})
local Main = GeneralTab:CreateSection({
    Name = "Main";
    Side = "Left"
})
local Misc = GeneralTab:CreateSection({
    Name = "Misc";
    Side = 'Right'
})
Main:AddToggle({
    Name = "Killaura",
    Flag = "KillAura",
    Keybind = 1,
    Callback = function(t)
        getgenv().a = t
        if t then
            KillAura()
        end
    end
})

Main:AddToggle({
    Name = "Fly",
    Flag = "Flying";
    Keybind = 1,
    Callback = function(b)
        getgenv().b = b
        if b then
            Fly()
        elseif b == false then
            workspace:FindFirstChild('Fly'):Destroy()
        end
    end
})
Main:AddSlider({
    Name = "WalkSpeed",
    Flag = "Walkspeed",
    Value = 35,
    Min = 0,
    Max = 200,
    Callback = function(w)
        while game:GetService("RunService").RenderStepped:Wait() and plr.Character do --checks if character exists so it doesnt error
            plr.Character.Humanoid.WalkSpeed = w
        end
    end
})
Misc:AddButton({
    Name = "NoFog and FullBright",
    Callback = function()
        light.FogEnd = 100000
        light.FogStart = 0
        light.ClockTime = 14
        light.Brightness = 0
        light.GlobalShadows = false
        for i,v in pairs(light:GetDescendants()) do
        if v:IsA('Atmosphere') then
            v:Destroy()
        end
    end
    end
})

---/// Second Tab ///----

local VisualTab = PepsisWorld:CreateTab({
    Name = "Visual";
})
local Visual = VisualTab:CreateSection({
    Name = "Esp";
    Side = "Left"
})
local Visual1 = VisualTab:CreateSection({
    Name = "Esp";
    Side = "Left"
})
Visual:AddToggle({
    Name = "Armor Chest",
    Flag = "ESP";
    Callback = function(a)
        if a == true then
            esp(ArmorC)
        elseif a == false then
            map:GetDescendants():WaitForChild('AChest'):Destroy()
        end
    end
})
